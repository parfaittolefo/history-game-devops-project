node {
    //Code pull from github
  stage('SCM (Get the source code from Git)') {
   steps{
     checkout scm
   }
  }

    //code analysis with sonarqube
  stage('SonarQube Analysis') {
    def scannerHome = tool 'SonarScanner';
    withSonarQubeEnv() {
      sh "${scannerHome}/bin/sonar-scanner"
    }
  }
    
    // Code vulnerabily scan with OWASP ZAP TOP 10

     stage('Dependancy-Vuln check OWASP') {
      steps
     
         {
          dependencyCheck additionalArguments: '--format=HTML', odcInstallation: 'OWASP-ZAP-DP'
      }
  }



  //Run test 

/*stage('Run Test'){

  steps{
    bat script: 'mvn test -Dbrowser=localchrome'
  }*/


//Publish report


}





